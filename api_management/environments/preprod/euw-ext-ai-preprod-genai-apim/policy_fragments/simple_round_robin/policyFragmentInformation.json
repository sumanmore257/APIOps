{
    "properties": {
        "format": "rawxml",
        "value": "\u003C!-- Policy fragment to use Pay As You Go (PAYG) endpoints when the PTU endpoints are busy.\n\n    should be used inside the \u003Cbackend\u003E section of the policy\n\n    Expected named values\n    - ptu-endpoint-1, payg-endpoint-1, payg-endpoint-2: The backend endpoints to be load balanced. --\u003E\r\n\u003Cfragment\u003E\r\n\t\u003C!-- Exponential retry policy: If the HTTP status code of the response is 300 or greater, the request is retried. \n     Maximum retries: 3. Initial retry interval: 1 second. Maximum retry interval: 10 seconds. \n     Retry interval increase per retry: 2 seconds --\u003E\r\n\t\u003Cretry condition=\u0022@(context.Response.StatusCode == 429)\u0022 count=\u00223\u0022 interval=\u00221\u0022 max-interval=\u002210\u0022 delta=\u00222\u0022\u003E\r\n\t\t\u003C!-- The retry policy executes its child policies once and then retries their execution until the retry \n        condition becomes false or retry count is exhausted. --\u003E\r\n\t\t\u003Cchoose\u003E\r\n\t\t\t\u003Cwhen condition=\u0022@(context.Response.StatusCode == 429)\u0022\u003E\r\n\t\t\t\t\u003C!-- If the PTU returns 429, the control enters this block --\u003E\r\n\t\t\t\t\u003C!-- It is also possible to have a pool of backends and load balance them --\u003E\r\n\t\t\t\t\u003Cset-variable name=\u0022selected-backend-id\u0022 value=\u0022payg-backend-1\u0022 /\u003E\r\n\t\t\t\t\u003Cset-backend-service backend-id=\u0022@((string)context.Variables[\u0022selected-backend-id\u0022])\u0022 /\u003E\r\n\t\t\t\u003C/when\u003E\r\n\t\t\t\u003Cotherwise\u003E\r\n\t\t\t\t\u003C!-- This is the default path of the request --\u003E\r\n\t\t\t\t\u003C!-- The backend will point to the \u0060ptu endpoint\u0060 or it is possible to load balance multiple \n                PTU endpoints as well --\u003E\r\n\t\t\t\t\u003Cset-variable name=\u0022selected-backend-id\u0022 value=\u0022ptu-backend-1\u0022 /\u003E\r\n\t\t\t\t\u003Cset-backend-service backend-id=\u0022@((string)context.Variables[\u0022selected-backend-id\u0022])\u0022 /\u003E\r\n\t\t\t\u003C/otherwise\u003E\r\n\t\t\u003C/choose\u003E\r\n\t\t\u003Cforward-request timeout=\u0022120\u0022 fail-on-error-status-code=\u0022true\u0022 buffer-response=\u0022false\u0022 /\u003E\r\n\t\u003C/retry\u003E\r\n\u003C/fragment\u003E"
    }
}